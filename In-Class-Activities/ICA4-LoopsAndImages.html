<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Susan Eileen Fox">
<meta name="dcterms.date" content="2025-09-26">

<title>ICA: Loops and Images – Vision Readings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9011e249e8d359b0658fa71d60c1fa6f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Vision Readings</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ICA: Loops and Images</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Susan Eileen Fox </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 26, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#exploring-the-range-function" id="toc-exploring-the-range-function" class="nav-link" data-scroll-target="#exploring-the-range-function">Exploring the <code>range</code> function</a></li>
  <li><a href="#repeating-an-action-n-times" id="toc-repeating-an-action-n-times" class="nav-link" data-scroll-target="#repeating-an-action-n-times">Repeating an action N times</a></li>
  <li><a href="#looping-over-lists" id="toc-looping-over-lists" class="nav-link" data-scroll-target="#looping-over-lists">Looping over lists</a></li>
  <li><a href="#accumulator-variables-and-for-loops" id="toc-accumulator-variables-and-for-loops" class="nav-link" data-scroll-target="#accumulator-variables-and-for-loops">Accumulator variables and <code>for</code> loops</a></li>
  <li><a href="#simple-movement" id="toc-simple-movement" class="nav-link" data-scroll-target="#simple-movement">Simple movement</a></li>
  <li><a href="#what-to-hand-in" id="toc-what-to-hand-in" class="nav-link" data-scroll-target="#what-to-hand-in">What to hand in</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="overview" class="level1">
<h1>Overview</h1>
<p>In this activity, you will practice with <code>for</code> loops and closely related ideas about sequences and accumulator variables, particularly applying them to images. This is our first <strong>control structure</strong>, programming tools that change the line-by-line, step-by-step process of evaluating a program. In this case, a <code>for</code> loop allows us to repeat a set of statements over and over again. Loops, like other control structures, are essential for making our code concise and efficient to write.</p>
<p>To avoid repeated typing, and the chance for errors to creep in, we use loops to tell the computer to repeat some actions. The <code>for</code> loop in Python is very convenient. It has a very specific syntax (the parts shown with angled brackets around them are <em>placeholders</em>, not part of the syntax:</p>
<div id="1e7517c0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1"></a><span class="cf">for</span> <span class="op">&lt;</span>var<span class="op">&gt;</span> <span class="kw">in</span> <span class="op">&lt;</span>sequence<span class="op">&gt;</span>:</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2"></a>    <span class="op">&lt;</span>statements to be repeated (indented)<span class="op">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="1" data-code-annotation="1">Loop variable and collection to loop over</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="2" data-code-annotation="2">Loop body The word after <code>for</code> must be a variable name. This special variable is the loop variable. The next word must be <code>in</code>, and then we must specify an <strong>iterable</strong> data type. Sequences like lists and strings are iterable, and functions like the <code>range</code> function are iterable as well (when called by the loop, it produces a sequence of values).</span>
</dd>
</dl>
</div>
</div>
<p><strong>Note:</strong> Complex statements in Python, like these, always have a first line that starts with the keyword that defines the statement (<code>for</code>, in this case) and the first line always ends with a colon (<code>:</code>).</p>
</section>
<section id="exploring-the-range-function" class="level1">
<h1>Exploring the <code>range</code> function</h1>
<p>The <code>range</code> function is used in <code>for</code> loops to generate a sequence of integers. It works in a way similar to string or list slicing, though not with the same syntax.</p>
<p>Try each of the following, by copying it into a code file in PyCharm and running it. Vary the values and try to predict the output.</p>
<p><strong>A simple use of <code>range</code> to count:</strong></p>
<div id="52e07b0d" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
1
2
3
4</code></pre>
</div>
</div>
<p><strong>Counting upward, but not starting at 0:</strong></p>
<div id="3db73c14" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>, <span class="dv">26</span>):</span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>20
21
22
23
24
25</code></pre>
</div>
</div>
<p><strong>Counting while skipping:</strong></p>
<div id="011527a4" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">15</span>, <span class="dv">2</span>):</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
2
4
6
8
10
12
14</code></pre>
</div>
</div>
<p><strong>Try this to hand in:</strong> Make a new script file, and create the following <code>for</code> loops that use the <code>range</code> function:</p>
<ul>
<li>Create a <code>for</code> loop like the ones above that prints the values from 100 to 200</li>
<li>Create a <code>for</code> loop like the ones above that prints the values from 1000 to 2000</li>
<li>Create a <code>for</code> loop like the ones above that prints the multiples of five starting at zero and going up to include 100</li>
<li>Create a <code>for</code> loop that counts down from 10 to 0 (challenge one)</li>
</ul>
</section>
<section id="repeating-an-action-n-times" class="level1">
<h1>Repeating an action N times</h1>
<p>The <code>for</code> loops in the previous section are the simplest form: just using a loop variable to repeat something a fixed number of times. We often use simple variable names for the loop variables with this kind of loop, like <code>i</code>, <code>j</code>, or <code>k</code>.</p>
<p>Here you will practice with using this kind of loop when drawing on an image.</p>
<p><strong>Try this to hand in:</strong> Examine the starter code shown below, and provided in <code>flowerScatter.py</code>.</p>
<div id="dec916b2" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="annotated-cell-5"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1"></a><span class="im">import</span> cv2</span>
<span id="annotated-cell-5-2"><a href="#annotated-cell-5-2"></a><span class="im">import</span> random</span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3"></a></span>
<span id="annotated-cell-5-4"><a href="#annotated-cell-5-4"></a>bkgrndImg <span class="op">=</span> cv2.imread(<span class="st">"SamppleImages/wildColumbine.jpg"</span>)</span>
<span id="annotated-cell-5-5"><a href="#annotated-cell-5-5"></a></span>
<span id="annotated-cell-5-6"><a href="#annotated-cell-5-6"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1">1</button><span id="annotated-cell-5-7" class="code-annotation-target"><a href="#annotated-cell-5-7"></a>cx <span class="op">=</span> <span class="dv">150</span></span>
<span id="annotated-cell-5-8"><a href="#annotated-cell-5-8"></a>cy <span class="op">=</span> <span class="dv">150</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="2">2</button><span id="annotated-cell-5-9" class="code-annotation-target"><a href="#annotated-cell-5-9"></a>cv2.ellipse(bkgrndImg, (cx <span class="op">+</span> <span class="dv">15</span>, cy), (<span class="dv">25</span>, <span class="dv">16</span>), <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">360</span>, (<span class="dv">252</span>, <span class="dv">202</span>, <span class="dv">252</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-5-10"><a href="#annotated-cell-5-10"></a>cv2.ellipse(bkgrndImg, (cx, cy <span class="op">+</span> <span class="dv">15</span>), (<span class="dv">25</span>, <span class="dv">16</span>), <span class="dv">90</span>, <span class="dv">0</span>, <span class="dv">360</span>, (<span class="dv">252</span>, <span class="dv">170</span>, <span class="dv">252</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-5-11"><a href="#annotated-cell-5-11"></a>cv2.ellipse(bkgrndImg, (cx <span class="op">-</span> <span class="dv">15</span>, cy), (<span class="dv">25</span>, <span class="dv">16</span>), <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">360</span>, (<span class="dv">252</span>, <span class="dv">202</span>, <span class="dv">252</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-5-12"><a href="#annotated-cell-5-12"></a>cv2.ellipse(bkgrndImg, (cx, cy <span class="op">-</span> <span class="dv">15</span>), (<span class="dv">25</span>, <span class="dv">16</span>), <span class="op">-</span><span class="dv">90</span>, <span class="dv">0</span>, <span class="dv">360</span>, (<span class="dv">252</span>, <span class="dv">170</span>, <span class="dv">252</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="3">3</button><span id="annotated-cell-5-13" class="code-annotation-target"><a href="#annotated-cell-5-13"></a>cv2.circle(bkgrndImg, (cx, cy), <span class="dv">15</span>, (<span class="dv">114</span>, <span class="dv">236</span>, <span class="dv">242</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-5-14"><a href="#annotated-cell-5-14"></a></span>
<span id="annotated-cell-5-15"><a href="#annotated-cell-5-15"></a>cv2.imshow(<span class="st">"Flowers"</span>, bkgrndImg)</span>
<span id="annotated-cell-5-16"><a href="#annotated-cell-5-16"></a>cv2.waitKey()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="7,8" data-code-annotation="1">Sets the center point of the flower</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="9,10,11,12" data-code-annotation="2">Draws four ellipses for petals, each a fixed offset in a different direction from center point</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="13" data-code-annotation="3">Draws the flower center</span>
</dd>
</dl>
</div>
</div>
<p>Run the <code>flowerScatter.py</code> program and see what it does.</p>
<p>First, we are going to change how the center point is specified. In the original code, <code>cx</code> and <code>cy</code> are set to a fixed value: every time you run the program, the flower appears in the same place. We are going to change those two lines, so that <code>cx</code> and <code>cy</code> are set to random values in the range of the width and height of the image. This image is 640 pixels by 480 pixels. Use the <code>randint</code> function from the <code>random</code> module to generate a value for <code>cx</code> between 0 and 639, and a value for <code>cy</code> that is between 0 and 479. (If you don’t remember how to use <code>randint</code>: <strong>ask for help!</strong>)</p>
<p>Next, we are going to add a <code>for</code> loop to repeat all the lines from line 6 to line 12. Add the loop before line 6, using the loops from the previous section as models. Make it loop 10, 20, or even 50 times. Select the lines from 6 to 12 that we want to repeat, and indent them by hitting <code>tab</code> on your keyboard.</p>
<p>Test your program until it does what you want. You should see something like the picture in <a href="#fig-flowers" class="quarto-xref">Figure&nbsp;1</a>.</p>
<div id="fig-flowers" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-flowers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ICA4-Images/ICA4-flowers.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Typical output when loop repeats 50 times"><img src="ICA4-Images/ICA4-flowers.png" class="img-fluid figure-img" style="width:15cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-flowers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Typical output when loop repeats 50 times
</figcaption>
</figure>
</div>
</section>
<section id="looping-over-lists" class="level1">
<h1>Looping over lists</h1>
<p>Another common pattern for a <code>for</code> loop is to build a list of data, and then use that as the sequence for the loop. When we do this, the loop variable is assigned to the values in the list, one at a time, and it repeats the loop body once for each value in the list. We typically choose a name for the loop variable that describes what it contains, even if that is just <code>val</code>. This helps human readers to distinguish this kind of loop from the earlier type (Python doesn’t care).</p>
<p>Try the example below to see how this kind of loop works.</p>
<div id="74396e6b" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="cf">for</span> name <span class="kw">in</span> [<span class="st">'Cindy'</span>, <span class="st">'Marco'</span>, <span class="st">'Fatima'</span>, <span class="st">'Thomas'</span>, <span class="st">'Yutong'</span>]:</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="bu">print</span>(<span class="st">"Hello and welcome"</span>, name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello and welcome Cindy
Hello and welcome Marco
Hello and welcome Fatima
Hello and welcome Thomas
Hello and welcome Yutong</code></pre>
</div>
</div>
<p><strong>Try this to hand in:</strong> Start with the code snippet shown below, and included in the <code>squares.py</code> file. It creates a blank image using <code>zeros</code> and sets it to a light beige-yellow color. Notice the <code>squareSizes</code> list. It contains a set of side lengths (half side lengths, actually) for the squares we want to draw, centered in <code>squareImg</code>. They are not the same distance from each other, so we can’t use the <code>range</code> function to generate them.</p>
<div id="84b7ed46" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="im">import</span> cv2</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>squareImg <span class="op">=</span> np.zeros((<span class="dv">500</span>, <span class="dv">500</span>, <span class="dv">3</span>), np.uint8)</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a>squareImg[:,:] <span class="op">=</span> (<span class="dv">220</span>, <span class="dv">240</span>, <span class="dv">245</span>)</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a>squareSizes <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">100</span>]</span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Add a for loop here</span></span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a>cv2.imshow(<span class="st">"Squares"</span>, squareImg)</span>
<span id="cb9-12"><a href="#cb9-12"></a>cv2.waitKey()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code snippet also includes a comment marked with <code>TODO</code>. <em>TODO</em> statements are used in programming to mark a place where a change needs to be made: adding a feature, etc. We will use them at times to help indicate where in the code we want you to make changes, and what you should do. <strong>Remove the TODO comment when you finish implementing and testing the step.</strong></p>
<p>First of all, create a <code>for</code> loop that has <code>squareSizes</code> as its sequence, with a loop variable called <code>hSide</code> (short for “half side”). Using incremental development, start by having the loop just print the value of <code>hSide</code> so you can check if the loop is working correctly before going on to the next step.</p>
<p>Once you are sure the <code>for</code> loop is correct, change the body of the loop to a call to <code>cv2.rectangle</code>. We need to give the upper-left and lower-right corners of the rectangle in order to draw it. We want each square to be centered on the midpoint of the image: (250, 250). Therefore, we need to calculate the upper-left corner coordinates, and the lower-right corner coordinates, as offsets from the middle. <a href="#fig-squareDiagram" class="quarto-xref">Figure&nbsp;2</a> shows how this works for the first value of <code>hSide</code>: 10. If we subtract <code>hSide</code> from 250 for both x and y coordinates, that will give us the upper-left corner of the square, and if we add <code>hSide</code> to 250 for both x and y, we get the lower-right corner. These are the two points we need to pass to <code>rectangle</code>.</p>
<div id="fig-squareDiagram" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-squareDiagram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ICA4-Images/ICA4-squareDiagram.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: How to calculate upper-left and lower-right corner coordinates"><img src="ICA4-Images/ICA4-squareDiagram.png" class="img-fluid figure-img" style="width:15cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-squareDiagram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: How to calculate upper-left and lower-right corner coordinates
</figcaption>
</figure>
</div>
<p>Use the color <code>(0, 0, 128)</code> to get a dark red color for the square, and do not draw them filled in.</p>
<p>Your final output should look like <a href="#fig-squares" class="quarto-xref">Figure&nbsp;3</a>.</p>
<div id="fig-squares" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-squares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ICA4-Images/ICA4-squares.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;3: Final result"><img src="ICA4-Images/ICA4-squares.png" class="img-fluid figure-img" style="width:15cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-squares-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Final result
</figcaption>
</figure>
</div>
</section>
<section id="accumulator-variables-and-for-loops" class="level1">
<h1>Accumulator variables and <code>for</code> loops</h1>
<p>An <strong>accumulator variable</strong> is an extra variable, not the loop variable, that collects values across the iterations of a loop. Below is a simple example, where the loop variable counts from 30 to 40, and the accumulator collects the sum of all the values the loop variable takes on.</p>
<div id="05177574" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="annotated-cell-8"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="1">1</button><span id="annotated-cell-8-1" class="code-annotation-target"><a href="#annotated-cell-8-1"></a>total <span class="op">=</span> <span class="dv">0</span></span>
<span id="annotated-cell-8-2"><a href="#annotated-cell-8-2"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">30</span>, <span class="dv">41</span>):</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="2">2</button><span id="annotated-cell-8-3" class="code-annotation-target"><a href="#annotated-cell-8-3"></a>    total <span class="op">=</span> total <span class="op">+</span> i</span>
<span id="annotated-cell-8-4"><a href="#annotated-cell-8-4"></a><span class="bu">print</span>(total)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-8" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="1" data-code-annotation="1">Initialize accumulator before loop</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="3" data-code-annotation="2">Update accumulator inside loop</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>385</code></pre>
</div>
</div>
<p>Notice the three key features of an accumulator variable:</p>
<ul>
<li>The accumulator variable is created and set to an initial value before the loop</li>
<li>Inside the loop, often at the end, we update the value of the accumulator. This usually means combining the old value of the accumulator with a new value.</li>
</ul>
<p>Read the example below, included in your starter files as <code>accumExamp.py</code>. It uses two accumulator variables to calculate positions for a series of lines. It also uses an in-loop variable that sets the color with a formula based on the loop variable.</p>
<p><strong>Before running this program:</strong> Read through this program line by line, and figure out what the values of each variable should be during the first pass through the for loop. Discuss with your teammates, and predict what the picture should look like. Then extend that to the other runs of the loop. Only after that, run the program and see if you were right.</p>
<div id="ffd64bd6" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="im">import</span> cv2</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a>img <span class="op">=</span> cv2.imread(<span class="st">"SampleImages/landscape1MuchSmaller.jpg"</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a>xPos <span class="op">=</span> <span class="dv">150</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>yPos <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">15</span>):</span>
<span id="cb11-8"><a href="#cb11-8"></a>    bgChanVal <span class="op">=</span> <span class="dv">16</span> <span class="op">*</span> i <span class="op">+</span> <span class="dv">10</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>    cv2.line(img, (xPos, yPos), (xPos <span class="op">+</span> <span class="dv">20</span>, yPos <span class="op">+</span> <span class="dv">100</span>), (bgChanVal, bgChanVal, <span class="dv">0</span>), <span class="dv">3</span>)</span>
<span id="cb11-10"><a href="#cb11-10"></a>    cv2.imshow(<span class="st">"Lines"</span>, img)</span>
<span id="cb11-11"><a href="#cb11-11"></a>    cv2.waitKey()</span>
<span id="cb11-12"><a href="#cb11-12"></a>    xPos <span class="op">=</span> xPos <span class="op">+</span> <span class="dv">50</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>    yPos <span class="op">=</span> yPos <span class="op">+</span> <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you can’t predict what the lines of code will do, try adding print statements so that you can see the values of the variables from one step to the next. Adding explanatory strings to your print statements will help!</p>
<p><strong>Try this to hand in:</strong> Modify the <code>circleLine.py</code> file. The starter script will make a custom light-green blank image, and will then draw a line of circles, each of a different color, spaced out across the image, as shown in <a href="#fig-circleLine" class="quarto-xref">Figure&nbsp;4</a>.</p>
<div id="f44ac8e6" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a><span class="im">import</span> cv2</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>image <span class="op">=</span> np.zeros((<span class="dv">300</span>, <span class="dv">700</span>, <span class="dv">3</span>), np.uint8)</span>
<span id="cb12-5"><a href="#cb12-5"></a>image[:,:] <span class="op">=</span> (<span class="dv">206</span>, <span class="dv">252</span>, <span class="dv">202</span>)</span>
<span id="cb12-6"><a href="#cb12-6"></a>colors <span class="op">=</span> [(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>), (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">255</span>), (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>), (<span class="dv">255</span>, <span class="dv">255</span>, <span class="dv">0</span>), (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>), (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">255</span>)]</span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Add for loop here to draw six circles as described in activity</span></span>
<span id="cb12-9"><a href="#cb12-9"></a></span>
<span id="cb12-10"><a href="#cb12-10"></a>cv2.imshow(<span class="st">"Circles"</span>, image)</span>
<span id="cb12-11"><a href="#cb12-11"></a>cv2.waitKey()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You should replace the <em>TODO</em> comment with a <code>for</code> loop that repeats six time with <code>i</code> as its loop variable. Inside the loop:</p>
<ul>
<li>Define a variable to hold the ith color in the <code>colors</code> list</li>
<li>Calculate the center x value according to this formula: <span class="math inline">\(x = 100 \cdot (i + 1)\)</span></li>
<li>Draw a filled-in circle on the <code>image</code> with the calculated x value, and a y value of 150, a radius of 50, and the selected color</li>
</ul>
<p>Feel free to change the six colors in the <code>colors</code> list if you like: I chose simple, bright colors that are the extremes in value (other than black and white).</p>
<p>Your program should produce something that looks like <a href="#fig-circleLine" class="quarto-xref">Figure&nbsp;4</a></p>
<div id="fig-circleLine" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-circleLine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ICA4-Images/ICA4-circles.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figure&nbsp;4: Line of circles expected output"><img src="ICA4-Images/ICA4-circles.png" class="img-fluid figure-img" style="width:25cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-circleLine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Line of circles expected output
</figcaption>
</figure>
</div>
</section>
<section id="simple-movement" class="level1">
<h1>Simple movement</h1>
<p>We can create simple animations by keeping a background image the same, and then drawing and redrawing shapes in different pictures on the same original background. Each time through the loop, we prepare a new <em>frame</em> and display it. We need only two new tools to implement a simple animation: copying images, and having delaying the speed for displaying each frame long enough for us to see it.</p>
<p><strong>Copying an image</strong></p>
<p>Once an image has been read into Python by OpenCV, you can use a <code>copy</code> method to make an exact copy of it. Changes to the copy will not change the original! With this, we can load a background image, and then make a copy of it before drawing. We only draw on the copy, and we only display the copy. The original stays pristine and unchanged, so each time through the loop we can make a fresh copy.</p>
<p><strong>Delaying rather than stopping</strong></p>
<p>Up until now, when we display an image, we have called <code>waitKey</code> to stop the program until we hit a key to make it continue. We have not passed any value to <code>waitKey</code>. However, <code>waitKey</code> actually takes an optional input. When given a positive integer, it pauses for that many <em>milliseconds</em> to see if the user is going to hit a key. If they do not, then it continues after the specified pause. You can experiment with different amounts of milliseconds to get movement that appears smooth, but I recommend a value no smaller than 10, and 30 to 50 is a reasonable range.</p>
<p><strong>Try this to hand in:</strong> Your final task for this activity is to draw an ellipse to look like a flying saucer, coming in to land in front of the Grand Teton Mountains. Below is a description of the program you are to create, written in pseudocode. Use the skills you have been practicing up to this point to implement this program (in a new Python file).</p>
<ul>
<li>Import the <code>cv2</code> module</li>
<li>Read in the <code>grandTeton.jpg</code> image and save it in a variable</li>
<li>Repeat the following 50 times
<ul>
<li>Assign a new variable to hold a copy of the original image</li>
<li>Calculate the (x, y) coordinates for the center of the ellipse as: <span class="math inline">\(x = 10i+10\)</span> and <span class="math inline">\(y=5i+10\)</span></li>
<li>Draw an ellipse on the new copy, with (x, y) for the centerpoint, and with axes of size 50 and 15, and color (245, 245, 175) (determine the other input values based on the example output below)</li>
<li>Display the copy</li>
<li>Wait for 30-50 milliseconds</li>
</ul></li>
<li>(After the loop) Display the image again</li>
<li>Wait, as normal, for the user to hit a key</li>
</ul>
<p>Your program should produce a series of pictures of the pale blue ellipse moving across the scene. <a href="#fig-ufo" class="quarto-xref">Figure&nbsp;5</a> shows a GIF of what the program should produce.</p>
<div id="fig-ufo" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ufo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="ICA4-Images/ICA4-UFO.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figure&nbsp;5: Frame from UFO animation"><img src="ICA4-Images/ICA4-UFO.gif" class="img-fluid figure-img" style="width:12cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ufo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Frame from UFO animation
</figcaption>
</figure>
</div>
</section>
<section id="what-to-hand-in" class="level1">
<h1>What to hand in</h1>
<p>You should have multiple Python files for this activity. At the very least, you <strong>must</strong> have:</p>
<ul>
<li>A file containing your simple loops using <code>range</code></li>
<li>The <code>flowerScatter.py</code> file, modified as directed</li>
<li>The <code>squares.py</code> file, modified as directed</li>
<li>The <code>accumExamp.py</code> file, with any experiments you performed</li>
<li>The <code>circleLine.py</code> file, modified as directed</li>
<li>A file containing the flying saucer script</li>
</ul>
<p>Use <em>commit</em> and <em>push</em> to copy your code to Github to submit this work.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>