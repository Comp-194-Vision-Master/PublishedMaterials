<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Susan Eileen Fox">
<meta name="dcterms.date" content="2025-08-14">

<title>Chapter 1, Getting Started with OpenCV</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Chapter1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Chapter1_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Chapter1_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Chapter1_files/libs/quarto-html/popper.min.js"></script>
<script src="Chapter1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Chapter1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Chapter1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Chapter1_files/libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Chapter1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Chapter1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Chapter1_files/libs/bootstrap/bootstrap-c9dc05ccd9e6568c662515419180efc4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="Chapter1_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="Chapter1_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="Chapter1_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Chapter 1, Getting Started with OpenCV</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Susan Eileen Fox </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 14, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#getting-started-with-opencv" id="toc-getting-started-with-opencv" class="nav-link active" data-scroll-target="#getting-started-with-opencv"><span class="header-section-number">1</span> Getting started with OpenCV</a>
  <ul class="collapse">
  <li><a href="#reading-and-displaying-images" id="toc-reading-and-displaying-images" class="nav-link" data-scroll-target="#reading-and-displaying-images"><span class="header-section-number">1.1</span> Reading and displaying images</a></li>
  <li><a href="#color-representations" id="toc-color-representations" class="nav-link" data-scroll-target="#color-representations"><span class="header-section-number">1.2</span> Color representations</a>
  <ul class="collapse">
  <li><a href="#rgb-color-representation" id="toc-rgb-color-representation" class="nav-link" data-scroll-target="#rgb-color-representation"><span class="header-section-number">1.2.1</span> RGB color representation</a></li>
  <li><a href="#other-color-representations" id="toc-other-color-representations" class="nav-link" data-scroll-target="#other-color-representations"><span class="header-section-number">1.2.2</span> Other color representations</a></li>
  </ul></li>
  <li><a href="#image-representation" id="toc-image-representation" class="nav-link" data-scroll-target="#image-representation"><span class="header-section-number">1.3</span> Image representation</a></li>
  <li><a href="#drawing-with-opencv" id="toc-drawing-with-opencv" class="nav-link" data-scroll-target="#drawing-with-opencv"><span class="header-section-number">1.4</span> Drawing with OpenCV</a>
  <ul class="collapse">
  <li><a href="#opencv-drawing-commands" id="toc-opencv-drawing-commands" class="nav-link" data-scroll-target="#opencv-drawing-commands"><span class="header-section-number">1.4.1</span> OpenCV drawing commands</a></li>
  <li><a href="#writing-images-to-files" id="toc-writing-images-to-files" class="nav-link" data-scroll-target="#writing-images-to-files"><span class="header-section-number">1.4.2</span> Writing images to files</a></li>
  <li><a href="#simple-drawing-example" id="toc-simple-drawing-example" class="nav-link" data-scroll-target="#simple-drawing-example"><span class="header-section-number">1.4.3</span> Simple Drawing Example</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="getting-started-with-opencv" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Getting started with OpenCV</h1>
<p>OpenCV is an add-on <strong>module</strong> in Python. Modules contain constants and functions that have a special purpose. They are not automatically loaded and available when we start up the Python interpreter. We have to explicitly ask for them to be loaded using the <code>import</code> command. For instance, the command below will load the OpenCV tools.</p>
<div id="344f5c26" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> cv2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can type the <code>import</code> command into the Python shell, or you can put it in a script file.</p>
<p><strong>Note: Always put all import statements at the top of your file.</strong></p>
<p>There are many useful modules provided by Python, or added by third-party developers. Other modules you might explore include <code>math</code>, <code>random</code>, <code>statistics</code>, <code>sys</code>, and <code>os</code>. A secondary module used by OpenCV is <code>numpy</code>, which provides efficient tools for representing and manipulating multidimensional arrays of numbers.</p>
<p>When you import a module, Python makes a special separate namespace where the tools from that module reside. In order to access them, you must tell Python to look in that namespace by attaching the name of the module, followed by a period. You’ll see examples of this below.</p>
<p>In Python, the OpenCV module is called <code>cv2</code>.</p>
<p>OpenCV has <a href="https://docs.opencv.org/4.2.0/">excellent online documentation</a>, and you will need to become familiar with using it (as discussed in Chapter 0).</p>
<p><strong>Try examples!</strong> Throughout this and future sections, you are encouraged to try the code examples along with the reading. To prepare for that, set up a project in PyCharm using the version of Python that has OpenCV installed in it, and move a copy of the <code>SampleImages</code> folder into the project. Put your code files in the top level of the project, alongside the <code>SampleImages</code> folder.</p>
<section id="reading-and-displaying-images" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="reading-and-displaying-images"><span class="header-section-number">1.1</span> Reading and displaying images</h2>
<div id="c2ddc6f0" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1"></a><span class="im">import</span> cv2</span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2">2</button><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3"></a>img1 <span class="op">=</span> cv2.imread(<span class="st">"SampleImages/snowLeo1.jpg"</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3">3</button><span id="annotated-cell-2-4" class="code-annotation-target"><a href="#annotated-cell-2-4"></a>cv2.imshow(<span class="st">"Leopard 1"</span>, img1)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4">4</button><span id="annotated-cell-2-5" class="code-annotation-target"><a href="#annotated-cell-2-5"></a>img2 <span class="op">=</span> cv2.imread(<span class="st">"SampleImages/snowLeo2.jpg"</span>)</span>
<span id="annotated-cell-2-6"><a href="#annotated-cell-2-6"></a>cv2.imshow(<span class="st">"Leopard 2"</span>, img2)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="5">5</button><span id="annotated-cell-2-7" class="code-annotation-target"><a href="#annotated-cell-2-7"></a>cv2.waitKey(<span class="dv">0</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="1" data-code-annotation="1">Load the OpenCV module</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="2">Read in the image from <code>snowLeo1.jpg</code>, assign <code>img1</code> to hold the image</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="4" data-code-annotation="3">Display the image in <code>img1</code> with title <code>Leopard 1</code></span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="5,6" data-code-annotation="4">Read <code>snowLeo2ljpg</code> into <code>img2</code> and display it as <code>Leopard 2</code></span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="7" data-code-annotation="5">Wait for the user to hit a key before continuing</span>
</dd>
</dl>
</div>
</div>
<p><strong>Note about paths:</strong> In Chapter 0 we discussed the importance of understanding paths in order to write programs that work with files. When we read in an image file, we must specify an absolute or relative path that is correct, as well as spelling the filename correctly. For this to work, you must configure your project so that:</p>
<ul>
<li>The <code>SampleImages</code> folder is in your project folder</li>
<li>The code file you make is in the same project folder as <code>SampleImages</code> (not inside <code>SampleImages</code> itself!)</li>
</ul>
<p>The relative path used in the code above starts from the folder where the code file is, and tells the computer how to navigate from there to where the image file is.</p>
<p><strong>Copy this program and run it to see what happens.</strong> You should see two windows pop up, showing the two snow leopard images (they may appear under other windows). To get the program to finish, click on one of the image windows to make it active, and then hit a key on the keyboard. The window should disappear and PyCharm should be done with the program.</p>
<p>OpenCV uses the string that is the first input to <code>imshow</code> to identify windows: if you use call <code>imshow</code> again with the same string but a new image, the new image will appear in the same window. To see this, change the string for the second <code>imshow</code> above to be <code>"Leopard 1"</code>. Then rerun the script. You probably will not see the first image, because it is overwritten so quickly by the second one. To slow things down, copy the <code>waitKey</code> line and put it right after the first call to <code>imshow</code>.</p>
</section>
<section id="color-representations" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="color-representations"><span class="header-section-number">1.2</span> Color representations</h2>
<p>Colors we perceive in the real world derive from different frequencies of light emitted or reflected off objects in our world, and filtered through our brain’s perception systems. Color theory is an extremely interesting field of study, with contributions from mathematics, physics, biology, art, photography, psychology, and more.</p>
<p>Inside the computer, we must convert color into a discrete, compact representation: a <strong>digital</strong> representation. There are dozens of ways of representing color digitally, though a few are most common. Below, we will explore several common color representations used to represent images.</p>
<section id="rgb-color-representation" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="rgb-color-representation"><span class="header-section-number">1.2.1</span> RGB color representation</h3>
<p>The most common representation of colors for images is the RGB (red, green, blue) format. This is because monitors and projectors typically use RGB to display colors to us. If you have ever looked closely at a projector’s output, or looked at a droplet of water on your phone screen, you can see dots of red, green, and blue light very close together (see <a href="#fig-rgbLED" class="quarto-xref">Figure&nbsp;1</a>).</p>
<div id="fig-rgbLED" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rgbLED-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/HD_LED_TV_screen.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;1: Closeup view of HD LED TV screen (Wikimedia Commons)"><img src="Ch1-Images/HD_LED_TV_screen.jpg" class="img-fluid figure-img" style="width:6cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rgbLED-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Closeup view of HD LED TV screen <a href="https://commons.wikimedia.org/wiki/File:Very_close_up_view_of_a_full_HD_LED_TV_screen.jpg">(Wikimedia Commons)</a>
</figcaption>
</figure>
</div>
<p>Long ago, pointillist artists discovered that small dots of color close together can fool the human eye into perceiving a different color altogether. Similarly, photographers from the 19th century figure out that they could simulate color photos by layers three copies of a photo together, one tinted with red, one with green, and one with blue. Only later did scientists come to understand how human color vision works, and why these methods work for us.</p>
<p>In human eyes, we have three different color receptors, or cones. Each kind responds to a different range of wavelengths, and responds more or less strongly depending on the wavelength (see <a href="#fig-cones" class="quarto-xref">Figure&nbsp;2</a>). If we display red, green, and blue light in close proximity, the human eye can be fooled into perceiving a corresponding wavelength of light.</p>
<div id="fig-cones" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cones-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/humancones.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;2: Wavelength vs Color-detecting cones (Hyperphysics, GSU)"><img src="Ch1-Images/humancones.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cones-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Wavelength vs Color-detecting cones <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/vision/colcon.html">(Hyperphysics, GSU)</a>
</figcaption>
</figure>
</div>
<p>In the RGB color representation, we call the three values of red, green, and blue light <strong>channels</strong>. We represent colors as a collection of three values, one for each channel. A good metaphor for how RGB works is that we have three sliders as shown in <a href="#fig-sliders" class="quarto-xref">Figure&nbsp;3</a>, one for each channel, and we can move them independently to select a different amount of light. The result is the actual color we are representing.</p>
<div id="fig-sliders" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sliders-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/Sliders.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;3: A slider for each channel (Dovesystems Scenemaster)"><img src="Ch1-Images/Sliders.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sliders-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: A slider for each channel <a href="https://www.dovesystems.com/consoles">(Dovesystems Scenemaster)</a>
</figcaption>
</figure>
</div>
<p>The position of the slider indicates how much of that channel’s light we are mixing. Shades of gray occur when all three channels have the same value. Black is the absence of all light, and white is full power to all three channels.</p>
<p>Sliders that control lights typically vary continuously in the positions they can take. However, inside the computer we need things to be discrete, so one question that arose is: how many different values do we need for each channel to get photorealistic images? If each slider was actually a light switch, it would have just two positions: on and off. We can represent these as 1 and 0. The table below shows all the combinations of the three switches, and the colors they correspond to.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">R</th>
<th style="text-align: center;">G</th>
<th style="text-align: center;">B</th>
<th>Color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td>Black</td>
</tr>
<tr class="even">
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td>Blue</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td>Green</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td>Red</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td>Cyan</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td>Magenta</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td>Yellow</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td>White</td>
</tr>
</tbody>
</table>
<p>Obviously, we want more than just two values per channel, but this representation only requires three bits of information inside the computer.</p>
<p><strong>Side note on binary representations:</strong> All data inside a computer is ultimately represented in binary, as a sequence of ones and zeros, because computers use the presence or absence of electricity in a wire, or the direction of a magnetic field, to represent data. A <strong>bit</strong> is the smallest unit of information: zero or one, (yes/no, true/false, on/off). Modern computers almost all use a collection of 8 bits as the smallest useful unit of data: this is called a <strong>byte</strong> (4 bits is called a <strong>nibble</strong>, computer scientists like puns!). When we are choosing how to represent data, sometimes we must consider how many bytes that data will take up.</p>
<p>There is an important relationship between the number of bits in a representation, and how many distinct patterns or values we can represent. <strong>If we have <span class="math inline">\(k\)</span> bits in our binary representation, then we can represent <span class="math inline">\(2^k\)</span> distinct values.</strong> Above, we had 3 bits per color: there were <span class="math inline">\(2^3 = 8\)</span> binary patterns, corresponding to eight distinct colors.</p>
<p>Representing colors by their frequencies or wavelengths might need an 8-byte floating-point number. Representations based on multiple channels, each holding integers, can be more efficient.</p>
<p>The typical representation for RGB channels provides one byte (8 bits) for each channel, for a total of 3 bytes to represent a color. According to the rule above, each channel can represent <span class="math inline">\(2^8 = 256\)</span> distinct values: 00000000, 00000001, 0000010, … 11111110, 11111111. We use nonnegative integer values starting with zero; we call this kind of number an <strong>unsigned integer</strong>. In the case of color channel values, we use the integers from 0 to 255. The total number of distinct colors we can create with this representation is <span class="math inline">\(2^{24} = 16,777,216\)</span>, more than 16 million distinct colors!</p>
<p><strong>We represent a color as a collection of three 8-bit unsigned integer values, one for each channel.</strong></p>
<p>There are many online “color pickers” that let us generate colors, and shows us the color representations in different formats. Explore <a href="https://htmlcolorcodes.com/color-picker/">the color picker at HTML Color Codes</a>. Because this is designed for choosing web colors, it shows each color in a Hex representation, in RGB, and in HSL. The Hex representation is used on websites and other applications for colors: it is actually the RGB color values, rewritten into <strong>hexadecimal</strong> (base 16) notation (to see this, click on a color close to black, where the values will be close to zero). Notice that the RGB values are always in the range from 0 to 255.</p>
<p>HSL stands for “hue, saturation, lightness” and is a very different color representation than RGB. We will not use HSL, but it is closely related to a color representation called HSV, which we will use when using color to segment images or track objects. (See <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSL and HSV, Wikipedia</a> for more details about how HSL and HSV relate.)</p>
<p>OpenCV in Python chooses to represent RGB colors backwards, as BGR. That means that a color is a tuple containing three numbers: blue channel, green channel, red channel. A tuple is like a list, but can’t be modified. The numbers in the tuple must be integers between 0 and 255. For instance, <a href="#fig-colorCodes" class="quarto-xref">Figure&nbsp;4</a> shows three colors and their BGR representations in OpenCV</p>
<div id="fig-colorCodes" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorCodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/color-black.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="(0, 0, 0) black"><img src="Ch1-Images/color-black.png" class="img-fluid figure-img"></a></p>
<figcaption>(0, 0, 0) black</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/color-blue.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="(255, 0, 0) blue"><img src="Ch1-Images/color-blue.png" class="img-fluid figure-img"></a></p>
<figcaption>(255, 0, 0) blue</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/color-greenyellow.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="(0, 180, 180) green-yellow"><img src="Ch1-Images/color-greenyellow.png" class="img-fluid figure-img"></a></p>
<figcaption>(0, 180, 180) green-yellow</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorCodes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Colors and their representations in OpenCV
</figcaption>
</figure>
</div>
</section>
<section id="other-color-representations" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="other-color-representations"><span class="header-section-number">1.2.2</span> Other color representations</h3>
<p>There are many other color representations that we could use. As mentioned before, one used for color-based algorithms is called HSV (hue, saturation, value). In HSV, the basic color is defined by single channel value, the <strong>hue</strong>. Hue values are interpreted as degrees around a circle: 0 to 359. The other two channel values are thought of as percentages, often in the range from 0 to 100.</p>
<p>The <strong>saturation</strong> channel describes how “pure” or intense the color is: one way to think of saturation is how mixed with white the color is: high saturation values have little mixture with white, low saturation are strongly mixed with white. The <strong>value</strong> channel captures the brightness of the image: you can think of it as changing values appear mixed with white or gray. The value defines the color’s brightness, changing the shade of gray that we mix into the saturation: low values cause the hue to be mixed with dark gray or black, high values mix with light gray or white. The <a href="https://colorizer.org/">colorizer color picker</a>, while more clumsy to use, does include HSV as one of its options (also called HSB). <a href="#fig-hsv-hue-wheel" class="quarto-xref">Figure&nbsp;5</a> shows the mapping of hue values to degrees in HSV.</p>
<div id="fig-hsv-hue-wheel" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hsv-hue-wheel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/HSVhueWheel.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;5: HSV hue values, using the range from 0 to 360"><img src="Ch1-Images/HSVhueWheel.jpg" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hsv-hue-wheel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: HSV hue values, using the range from 0 to 360
</figcaption>
</figure>
</div>
<p>HSV is useful for color-tracking in images, because the hue changes relatively little when the brightness of the light changes, whereas all three channels in an RGB image change when the brightness changes.</p>
<p>OpenCV represents HSV values as a tuple of three 8-bit unsigned integers, much like RGB. That means the values are limited to the range from 0 to 255. <em>How does that work when the usual ranges of HSV values are 0-360, 0-100, and 0-100?</em></p>
<ul>
<li>The <em>hue</em> channel in OpenCV uses the range from 0 to 179, dividing the HSV degrees in half. Thus, a midgreen value in <a href="#fig-hsv-hue-wheel" class="quarto-xref">Figure&nbsp;5</a> above normally has value 120: in OpenCV we use 60 for this hue instead.</li>
<li>The <em>saturation</em> and <em>value</em> channels normally runs from 0 to 100. OpenCV rescales them to range from 0 to 255. To convert a “global” saturation level to OpenCV, use this formula: <span class="math inline">\(s_{opencv} = \frac{s_{global}}{100} \cdot 255\)</span>.</li>
</ul>
<p><strong>On beyond HSV</strong></p>
<p>There are many additional color representations, each with its own strengths and uses. As one example, the YUV color representation has three channels: YUV. The Y channel contains brightness or “luminance” information, and the U and V channels together describe the color. We use this color representation for balancing the brightness of an image, by converting to this format, modifying the Y channel, and then converting back to BGR for display/use. The <a href="https://softpixel.com/~cwright/programming/colorspace/yuv/">YUV Colorspace</a> web page gives some nice visuals showing how this representation works.</p>
</section>
</section>
<section id="image-representation" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="image-representation"><span class="header-section-number">1.3</span> Image representation</h2>
<p>Given a specific color representation, we now have to figure out how to represent a whole image. We want to distinguish between how an image might be represented when stored as a file, and how it might be represented when read into a program. In both cases, multiple representations are possible, though for our purposes we don’t need to know the details of different file representations, and we will focus on OpenCV’s method for representing images.</p>
<p>When an image is stored in a file, the file format often keeps the image’s data in a compressed form, saving space. The exact format and kind of compression used is signaled by the file extension (.jpg, .png, .gif, etc.). OpenCV can work with many file formats, but the extension <strong>must</strong> match the actual contents for any program to be able to read or display an image. <strong>Don’t just change the extension: that will just make the file unreadable.</strong> You have to use a program to convert from one representation of an image to another, if needed.</p>
<p>Once an image is read into a program to be manipulated, however, the image representation is very different from that in a file, and images are represented the same way, whether they originated in a jpg or png or any other file format. Different programming tools use slightly different representations for images, but all share certain key features:</p>
<ul>
<li>An image is a grid of <strong>pixels</strong> (short for <em>picture elements</em>)</li>
<li>Each pixel contains a single color</li>
<li>We interpret the horizontal dimension of the grid as the x dimension, with 0 at the left, increasing to the right</li>
<li>We interpret the vertical dimension of the grid as the y dimension, with 0 at the top, increasing downward</li>
<li>Locations for specific pixels are given as (x, y) coordinates</li>
</ul>
<p><a href="#fig-imagegrid" class="quarto-xref">Figure&nbsp;6</a> shows a tiny, 6 pixel by 6 pixel image, with x and y dimensions and indices given. The blue pixel representing the right eye is at (4, 1).</p>
<div id="fig-imagegrid" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-imagegrid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/imagegrid.drawio.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;6: Tiny 6x6 image with x and y dimensions and valid x and y indices"><img src="Ch1-Images/imagegrid.drawio.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-imagegrid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Tiny 6x6 image with x and y dimensions and valid x and y indices
</figcaption>
</figure>
</div>
<p>Note that a <em>pixel</em> is not a unit of measurement. While image files often store a mapping between numbers of pixels and distance, such as ppi (pixels per inch), that is not an intrinsic property of the images. A pixel is simply the smallest unit of an image. When the pixels are drawn small enough, we don’t notice the individual pixels, and instead see the whole picture. #fig-showPixels shows the “Mighty Midway” picture from <code>SampleImages</code>, and then a portion of the picture, zoomed in far enough to see the individual pixels. The original picture is 1000 pixels wide by 667 pixels tall.</p>
<div id="fig-showPixels" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-showPixels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/mightyMidway.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="mightyMidway.jpg"><img src="Ch1-Images/mightyMidway.jpg" class="img-fluid figure-img"></a></p>
<figcaption><code>mightyMidway.jpg</code></figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/mightyCloseup.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Zoomed-in view"><img src="Ch1-Images/mightyCloseup.png" class="img-fluid figure-img"></a></p>
<figcaption>Zoomed-in view</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-showPixels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: The <code>mightyMidway.jpg</code> image, and a section zoomed in to show pixels
</figcaption>
</figure>
</div>
<p><strong>Grayscale versus color images</strong></p>
<p>There are three variations on images: color, grayscale, and black-and-white. We have discussed color images and how color might be represented already. Grayscale images contain only shades of gray between black and white. As we noted earlier, shades of gray correspond to the RGB channels holding equal values: (195, 195, 195) is a medium bright shade of gray. Black-and-white images contain only black pixels and white pixels, no shades of gray in between.</p>
<p>Because a grayscale image has equal channel values, we only need to represent one copy, the <strong>luminance</strong> or brightness (for the gray shade above, just one 195 is needed). OpenCV represents grayscale images as a two-dimensional array, or <strong>matrix</strong>, of numbers. In <a href="#fig-image-matrices" class="quarto-xref">Figure&nbsp;8</a> a small example of a grayscale image is shown on the left, with</p>
<p>Color images, however, have more data per pixel, and generally use 2-4 numbers to represent each color. In OpenCV, we represent this by using a <strong>three</strong>-dimensional matrix: the first dimension is x, the second dimension is y, and the third dimension is for the channels. <a href="#fig-image-matrices" class="quarto-xref">Figure&nbsp;8</a> illustrates the structure of an OpenCV color image.</p>
<div id="fig-image-matrices" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-image-matrices-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/image-matrices.drawio.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" title="Figure&nbsp;8: Grayscale and color image matrix structures"><img src="Ch1-Images/image-matrices.drawio.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-image-matrices-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Grayscale and color image matrix structures
</figcaption>
</figure>
</div>
<p>Images in OpenCV are represented using Numpy arrays: we will return to this subject later when we look more closely at the Numpy module and the tools we may use to manipulate image arrays.</p>
</section>
<section id="drawing-with-opencv" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="drawing-with-opencv"><span class="header-section-number">1.4</span> Drawing with OpenCV</h2>
<p>OpenCV provides a set of tools that allow you to draw shapes on images. We can also make blank images to serve as “canvases” for our drawings. In this section we will explore the different drawing functions OpenCV provides, and you will also learn how to save an image to a file, so you can store the results.</p>
<section id="opencv-drawing-commands" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="opencv-drawing-commands"><span class="header-section-number">1.4.1</span> OpenCV drawing commands</h3>
<p>In this section we will introduce the basic drawing commands, and their basic inputs. You can find more commands and more details in the <a href="https://docs.opencv.org/4.x/d6/d6e/group__imgproc__draw.html">Drawing Functions page of the OpenCV documentation</a>; each function has more optional inputs than are given here.</p>
<p>In each example below we will use the same set of variables as is used in the documentation:</p>
<ul>
<li><code>img</code> is a typical OpenCV image, a Numpy array</li>
<li><code>pt</code>, <code>pt1</code>, and <code>pt2</code> are all points, tuples containing x and y indices into the image</li>
<li><code>color</code> is a color, a tuple containing blue, green, and red values</li>
<li><code>thickness</code> is line thickness, how wide to draw the lines, and if negative then the shape is drawn “filled-in”</li>
<li><code>angle</code>, <code>startAngle</code>, and <code>endAngle</code> are all angles, typically between 0 and 360, though other angles may be permitted</li>
</ul>
<p><strong>Note:</strong> Drawing or making other changes to an image does <strong>not</strong> automatically update the image displayed previously by a call to <code>imshow</code>. You must call <code>imshow</code> again to see the changes.</p>
<p><strong>Drawing lines</strong></p>
<div id="ebb1866f" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>cv2.line(img, pt1, pt2, color, thickness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>line</code> function takes in an image to draw on, two (x, y) coordinate points, input as tuples, and a color (given as a BGR tuple). The <code>thickness</code> input is optional, but is often used to tell how many pixels wide the line should be. If you do not specify thickness the line is drawn as one pixel wide. The function draws a line as specified between the two coordinate points.</p>
<p><strong>Drawing rectangles</strong></p>
<div id="a2acdc17" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>cv2.rectangle(img, pt1, pt2, color, thickness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>rectangle</code> function takes in an image to draw on, and two (x, y) coordinate points, as tuples. Typically, we also specify the color tuple and line thickness. The two points specify two opposite corner pixels of the rectangle to draw (for instance, upper-left and lower-right corners). If the line thickness is 1 or greater, then a line rectangle is drawn with the given corner points, line color, and line thickness. If the line thickness is negative then a filled in rectangle with the given corners and color is drawn.</p>
<p><strong>Drawing circles</strong></p>
<div id="bad360db" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>cv2.circle(img, pt, radius, color, thickness) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>circle</code> function takes in the image to draw on, the center point of the circle (a pixel location as an (x, y) tuple), an integer radius for the circle, and a color tuple. Line thickness is optional, and works the same as for rectangles: positive specifies line thickness, negative draws a filled-in circle.</p>
<p><strong>Drawing ellipses</strong></p>
<div id="a0d95aaf" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>cv2.ellipse(img, pt, axes, angle, startAngle, endAngle, color, thickness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Drawing ellipses (ovals) is the most complicated of the functions we will look at, because the function not only draws ellipses but also arcs and partial ellipses, both line and filled. Therefore, we will go into more details about what each input parameter does.</p>
<p>To take the easy ones first, <code>img</code> is the image to draw on, <code>pt</code> is the center point as (x, y) coordinates (if you like mathy details, <code>pt</code> is the center point of the circle that circumscribes this ellipse, as ellipses are usually defined by two points). The <code>color</code> and <code>thickness</code> inputs work just as for the other drawing commands.</p>
<p>For the remaining inputs, we will illustrate them with a specific example, shown below.</p>
<div id="ee1f9b9d" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1"></a><span class="im">import</span> cv2</span>
<span id="annotated-cell-7-2"><a href="#annotated-cell-7-2"></a></span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3"></a>beachIm <span class="op">=</span> cv2.imread(<span class="st">'SampleImages/beachBahamas.jpg'</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="1">1</button><span id="annotated-cell-7-4" class="code-annotation-target"><a href="#annotated-cell-7-4"></a>cv2.ellipse(beachIm,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="2">2</button><span id="annotated-cell-7-5" class="code-annotation-target"><a href="#annotated-cell-7-5"></a>            (<span class="dv">500</span>, <span class="dv">250</span>),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="3">3</button><span id="annotated-cell-7-6" class="code-annotation-target"><a href="#annotated-cell-7-6"></a>            (<span class="dv">70</span>, <span class="dv">150</span>),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="4">4</button><span id="annotated-cell-7-7" class="code-annotation-target"><a href="#annotated-cell-7-7"></a>            <span class="dv">45</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="5">5</button><span id="annotated-cell-7-8" class="code-annotation-target"><a href="#annotated-cell-7-8"></a>            <span class="dv">0</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="6">6</button><span id="annotated-cell-7-9" class="code-annotation-target"><a href="#annotated-cell-7-9"></a>            <span class="dv">360</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="7">7</button><span id="annotated-cell-7-10" class="code-annotation-target"><a href="#annotated-cell-7-10"></a>            (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">255</span>),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="8">8</button><span id="annotated-cell-7-11" class="code-annotation-target"><a href="#annotated-cell-7-11"></a>            <span class="dv">2</span>)</span>
<span id="annotated-cell-7-12"><a href="#annotated-cell-7-12"></a>cv2.imshow(<span class="st">"Beach"</span>, beachIm)</span>
<span id="annotated-cell-7-13"><a href="#annotated-cell-7-13"></a>cv2.waitKey()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="4" data-code-annotation="1"><code>img</code>, the value of <code>beachIm</code></span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="5" data-code-annotation="2"><code>pt</code>, a tuple holding the (x, y) center point</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="6" data-code-annotation="3"><code>axes</code>, a tuple holding sizes of ellipse’s axes</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="7" data-code-annotation="4"><code>angle</code>, an integer angle, rotated from the horizontal</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="8" data-code-annotation="5"><code>startAngle</code>, an integer angle, where to start drawing ellipse arc/wedge</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="9" data-code-annotation="6"><code>endAngle</code>, an integer angle, where to stop drawing ellipse arc/wedge</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="10" data-code-annotation="7"><code>color</code>, the color for the ellipse</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="11" data-code-annotation="8"><code>thickness</code>, line thickness or to make ellipse filled</span>
</dd>
</dl>
</div>
</div>
<p>This program produces the ellipse shown in <span class="citation" data-cites="figure-ellipse0">@figure-ellipse0</span>.</p>
<div id="fig-ellipse0" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ellipse0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/ellipsePics/ellipse.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Figure&nbsp;9: Ellipse drawn by code"><img src="Ch1-Images/ellipsePics/ellipse.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ellipse0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Ellipse drawn by code
</figcaption>
</figure>
</div>
<p>The <code>axes</code> input specifies the width and height of the ellipse in the form (r1, r2). To interpret these, first think of the ellipse as being unrotated. Then its first axis is horizontal, and the second axis is vertical. The <code>r1</code> value is one-half the length of the first axis, and <code>r2</code> is one-half the length of the second axis. <a href="#fig-ellipse1" class="quarto-xref">Figure&nbsp;10</a> show the (x, y) center point, and the length and meaning of the <code>axes</code> tuple (r1, r2).</p>
<div id="fig-ellipse1" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ellipse1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/ellipsePics/ellipse1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Figure&nbsp;10: Ellipse with center point (x, y) and axes (r1, r2) drawn on"><img src="Ch1-Images/ellipsePics/ellipse1.png" class="img-fluid figure-img" style="width:10cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ellipse1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Ellipse with center point (x, y) and axes (r1, r2) drawn on
</figcaption>
</figure>
</div>
<p>In this code example, the total width of the ellipse along its first axis is 140 pixels, and the total height of the ellipse along its second axis is 300 pixels.</p>
<p>The <code>angle</code> input specifies how far to rotate the ellipse in the clockwise direction from a start where its first axis is horizontal. Another way to think about it is that <code>angle</code> is the angle between the horizontal and the first axis. You can pass negative angles here, to get counter-clockwise rotations. <a href="#fig-ellipse2" class="quarto-xref">Figure&nbsp;11</a> Shows how angle is determined for our example.</p>
<div id="fig-ellipse2" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ellipse2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/ellipsePics/ellipse2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" title="Figure&nbsp;11: Ellipse with rotation angle marked"><img src="Ch1-Images/ellipsePics/ellipse2.png" class="img-fluid figure-img" style="width:10cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ellipse2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Ellipse with rotation angle marked
</figcaption>
</figure>
</div>
<p>The last two inputs to discuss are <code>startAngle</code> and <code>endAngle</code>. We will start with a simple rule: <strong>when in doubt, set <code>startAngle</code> to 0 and <code>endAngle</code> to 360</strong>. This will draw the full ellipse.</p>
<p>You only need to vary <code>startAngle</code> and <code>endAngle</code> if you want to draw just a portion of the outline of the ellipse, or a wedge of the filled-in ellipse. In those cases, you need to understand how they work.</p>
<p>Imagine that the computer, in drawing the ellipse, starts at the end of the first axis on the right side of the ellipse, and draws the ellipse in a clockwise manner, ending back where it started. When drawing a partial ellipse, the computer follows the same path, but holds the (metaphorical) pen above the paper, except where specified by the start and end angles. Between them, <code>startAngle</code> and <code>endAngle</code> specify where on the rim of the ellipse to <em>start</em> drawing the ellipse, and where to <em>end</em> drawing the ellipse.</p>
<p>Each of these angles takes on a value between 0 and 360, where 0 is the right-side first-axis point, and the others rotate around the ellipse clockwise. !fig-ellipse3 shows the locations for 0, 90, 180, and 270 for our example ellipse.</p>
<div id="fig-ellipse3" class="lightbox quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ellipse3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Ch1-Images/ellipsePics/ellipse3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15" title="Figure&nbsp;12: Ellipse showing partial drawing angles"><img src="Ch1-Images/ellipsePics/ellipse3.png" class="img-fluid figure-img" style="width:10cm"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ellipse3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12: Ellipse showing partial drawing angles
</figcaption>
</figure>
</div>
<p>!fig-partialExamples shows nine pictures of an ellipse similar to the one shown above, but drawn as a filled ellipse. Each is labeled with the values for <code>startAngle</code> and <code>endAngle</code> used to create it.</p>
<div id="fig-partialExamples" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-partialExamples-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll0-360.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16" title="startAngle = 0, endAngle = 360"><img src="Ch1-Images/ellipsePics/partEll0-360.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 0, endAngle = 360</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll0-220.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17" title="startAngle = 0, endAngle = 220"><img src="Ch1-Images/ellipsePics/partEll0-220.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 0, endAngle = 220</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll0-180.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18" title="startAngle = 0, endAngle = 180"><img src="Ch1-Images/ellipsePics/partEll0-180.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 0, endAngle = 180</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll90-360.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19" title="startAngle = 90, endAngle = 360"><img src="Ch1-Images/ellipsePics/partEll90-360.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 90, endAngle = 360</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll90-220.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20" title="startAngle = 90, endAngle = 220"><img src="Ch1-Images/ellipsePics/partEll90-220.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 90, endAngle = 220</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll90-180.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21" title="startAngle = 90, endAngle = 180"><img src="Ch1-Images/ellipsePics/partEll90-180.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 90, endAngle = 180</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll135-360.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22" title="startAngle = 135, endAngle = 360"><img src="Ch1-Images/ellipsePics/partEll135-360.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 135, endAngle = 360</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll135-220.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23" title="startAngle = 135, endAngle = 220"><img src="Ch1-Images/ellipsePics/partEll135-220.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 135, endAngle = 220</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="Ch1-Images/ellipsePics/partEll135-180.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24" title="startAngle = 135, endAngle = 180"><img src="Ch1-Images/ellipsePics/partEll135-180.png" class="img-fluid figure-img" style="width:6cm"></a></p>
<figcaption>startAngle = 135, endAngle = 180</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-partialExamples-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13: Partial ellipses with varying start and end values
</figcaption>
</figure>
</div>
<p>Be prepared to experiment any time you want to use the <code>ellipse</code> function.</p>
<p><strong>Adding text to images</strong></p>
<div id="6a3a4c64" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>cv2.putText(img, text, pt, font, fontScale, color, thickness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>OpenCV can draw text on images, though the tools, and fonts, are rather bare-bones. The inputs include the image to draw on, the text to draw, and a point tuple specifying where to draw the text, plus the font, scale of font, text color, and line thickness for the text.</p>
<p>The point tuple gives the pixel where the <strong>lower-left corner</strong> of the text will appear.</p>
<p>The font is chosen by selecting from OpenCV’s built-in basic fonts (you are welcome, even encouraged, to explore how to add and access additional fonts on your own). By default, OpenCV includes a subset of the Hershey font family, shown in the table below</p>
<table class="caption-top table">
<colgroup>
<col style="width: 41%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Font Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_SIMPLEX</code></td>
<td style="text-align: left;">Normal-sized sans-serif font, simple complexity</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_PLAIN</code></td>
<td style="text-align: left;">Small-sized sans-serif font, simple complexity</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_DUPLEX</code></td>
<td style="text-align: left;">Normal-sized sans-serif font, medium complexity</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_COMPLEX</code></td>
<td style="text-align: left;">Normal-sized serif font, medium complexity</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_TRIPLEX</code></td>
<td style="text-align: left;">Normal-sized serif font, high complexity</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_COMPLEX_SMALL</code></td>
<td style="text-align: left;">Small-sized version of COMPLEX font</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_SCRIPT_SIMPLEX</code></td>
<td style="text-align: left;">Handwriting font, simple complexity</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>cv2.FONT_HERSHEY_SCRIPT_COMPLEX</code></td>
<td style="text-align: left;">Handwriting font, medium complexity</td>
</tr>
</tbody>
</table>
<p>The <code>fontScale</code> input is a floating-point number. It can be set to 1.0 to use the default size. Values greater than 1 will draw the font larger, values between 0.0 and 1.0 will shrink the font, and negative values will draw the text backwards!</p>
</section>
<section id="writing-images-to-files" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="writing-images-to-files"><span class="header-section-number">1.4.2</span> Writing images to files</h3>
<p>When we modify images in Python, the changes are only to the copy of the data that we have loaded into our Python program. They are not saved to the original file we read in. This is probably wise!</p>
<p>That said, you might create a beautiful picture and want to save it to a file. You can do that using the <code>imwrite</code> function. Always use a new filename when saving an image to file. <strong>Beware! if you use an existing filename in <code>imwrite</code>, you will overwrite the previous contents of that file</strong></p>
<div id="a102931b" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>cv2.imwrite(filename, image)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You call <code>imwrite</code> and first give it a path and filename where you want the new image to be saved. Be sure to include the extension, otherwise OpenCV does not know how to format the image data correctly in the file. The second input to <code>imwrite</code> is the image array itself.</p>
</section>
<section id="simple-drawing-example" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="simple-drawing-example"><span class="header-section-number">1.4.3</span> Simple Drawing Example</h3>
<p>The script below creates three images, and then illustrates each of the new images from scratch and then illustrates each of the drawing functions; it saves the resulting pictures to two files. It uses two numpy commands: zeros and ones. The zeros function makes an n-dimensional matrix filled entirely with zeros. In this case, we give the dimensions we want (300 rows, 500 columns, 3 channels) and tell it to make the numbers be uint8, the special type we need for 0 to 255 values. The ones function makes a matrix filled with ones. This call has 500 rows, 300 columns, and 3 channels, all filled with uint8. Copy these commands into a script and run it. Note that the imwrite function saves an image to a file. The type of the file is given by the extension on the filename.</p>
<div id="fc4a5643" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="annotated-cell-10"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-10-1"><a href="#annotated-cell-10-1"></a><span class="im">import</span> cv2</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="1">1</button><span id="annotated-cell-10-2" class="code-annotation-target"><a href="#annotated-cell-10-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="annotated-cell-10-3"><a href="#annotated-cell-10-3"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="2">2</button><span id="annotated-cell-10-4" class="code-annotation-target"><a href="#annotated-cell-10-4"></a>beach <span class="op">=</span> cv2.imread(<span class="st">"SampleImages/beachBahamas.jpg"</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="3">3</button><span id="annotated-cell-10-5" class="code-annotation-target"><a href="#annotated-cell-10-5"></a>draw1 <span class="op">=</span> np.zeros((<span class="dv">300</span>, <span class="dv">500</span>, <span class="dv">3</span>), np.uint8)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="4">4</button><span id="annotated-cell-10-6" class="code-annotation-target"><a href="#annotated-cell-10-6"></a>draw2 <span class="op">=</span> <span class="dv">255</span> <span class="op">*</span> np.ones((<span class="dv">500</span>, <span class="dv">300</span>, <span class="dv">3</span>), np.uint8)</span>
<span id="annotated-cell-10-7"><a href="#annotated-cell-10-7"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="5">5</button><span id="annotated-cell-10-8" class="code-annotation-target"><a href="#annotated-cell-10-8"></a>cv2.circle(beach, (<span class="dv">500</span>, <span class="dv">250</span>), <span class="dv">300</span>, (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-9"><a href="#annotated-cell-10-9"></a>cv2.circle(beach, (<span class="dv">500</span>, <span class="dv">250</span>), <span class="dv">200</span>, (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">155</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-10"><a href="#annotated-cell-10-10"></a>cv2.circle(beach, (<span class="dv">500</span>, <span class="dv">250</span>), <span class="dv">100</span>, (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">55</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-11"><a href="#annotated-cell-10-11"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="6">6</button><span id="annotated-cell-10-12" class="code-annotation-target"><a href="#annotated-cell-10-12"></a>cv2.rectangle(draw1, (<span class="dv">10</span>, <span class="dv">100</span>), (<span class="dv">100</span>, <span class="dv">10</span>), (<span class="dv">0</span>, <span class="dv">180</span>, <span class="dv">0</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-13"><a href="#annotated-cell-10-13"></a>cv2.ellipse(draw1, (<span class="dv">250</span>, <span class="dv">150</span>), (<span class="dv">100</span>, <span class="dv">60</span>), <span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">220</span>, (<span class="dv">250</span>, <span class="dv">180</span>, <span class="dv">110</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-14"><a href="#annotated-cell-10-14"></a>font <span class="op">=</span> cv2.FONT_HERSHEY_SIMPLEX</span>
<span id="annotated-cell-10-15"><a href="#annotated-cell-10-15"></a>cv2.putText(draw1, <span class="st">"Hi, there"</span>, (<span class="dv">10</span>, <span class="dv">270</span>), font, <span class="dv">1</span>, (<span class="dv">255</span>, <span class="dv">255</span>, <span class="dv">255</span>))</span>
<span id="annotated-cell-10-16"><a href="#annotated-cell-10-16"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="7">7</button><span id="annotated-cell-10-17" class="code-annotation-target"><a href="#annotated-cell-10-17"></a>cv2.line(draw2, (<span class="dv">50</span>, <span class="dv">50</span>), (<span class="dv">150</span>, <span class="dv">250</span>), (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>))</span>
<span id="annotated-cell-10-18"><a href="#annotated-cell-10-18"></a>cv2.circle(draw2, (<span class="dv">30</span>, <span class="dv">30</span>), <span class="dv">30</span>, (<span class="dv">220</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="op">-</span><span class="dv">1</span>)</span>
<span id="annotated-cell-10-19"><a href="#annotated-cell-10-19"></a></span>
<span id="annotated-cell-10-20"><a href="#annotated-cell-10-20"></a>cv2.imshow(<span class="st">"Beach"</span>, beach)</span>
<span id="annotated-cell-10-21"><a href="#annotated-cell-10-21"></a>cv2.imshow(<span class="st">"Black"</span>, draw1)</span>
<span id="annotated-cell-10-22"><a href="#annotated-cell-10-22"></a>cv2.imshow(<span class="st">"White"</span>, draw2)</span>
<span id="annotated-cell-10-23"><a href="#annotated-cell-10-23"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="8">8</button><span id="annotated-cell-10-24" class="code-annotation-target"><a href="#annotated-cell-10-24"></a>cv2.imwrite(<span class="st">"blackPic.jpg"</span>, draw1)</span>
<span id="annotated-cell-10-25"><a href="#annotated-cell-10-25"></a>cv2.imwrite(<span class="st">"whitePic.jpg"</span>, draw2)</span>
<span id="annotated-cell-10-26"><a href="#annotated-cell-10-26"></a></span>
<span id="annotated-cell-10-27"><a href="#annotated-cell-10-27"></a>cv2.waitKey(<span class="dv">0</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-10" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="2" data-code-annotation="1">Numpy to create blank images</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="4" data-code-annotation="2">Read in the beach picture</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="5" data-code-annotation="3">Create a black image 300 pixels tall and 500 pixels wide</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="6" data-code-annotation="4">Create a white image 300 tall by 500 wide</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="8,9,10" data-code-annotation="5">Draw three concentric circles on the beach</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="12,13,15" data-code-annotation="6">Draw a rectangle, a partial ellipse, and text on the black image</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="17,18" data-code-annotation="7">Draw a line and a circle on the white image</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="24,25" data-code-annotation="8">Write the new black and white images to files</span>
</dd>
</dl>
</div>
</div>
<p>The <code>zeros</code> function in Numpy creates an array and fills it with all zeros. We just specify the dimensions of the array (rows, columns, depth), and the type of data to store in the array. Since images use <strong>8-bit unsigned integers</strong> to represent color channel values, the special Numpy data type <code>uint8</code> is what we want. The <code>ones</code> function is similar, except that it creates an array filled with all ones. We can convert the pixels to white by multiplying by 255.</p>
<p>After reading this script, try it out for yourself. Try modifying parts of each command, or add additional commands, until you understand how each function works. Make sure you can draw lines, filled and unfilled rectangles, filled and unfilled circles, filled and unfilled ellipses and arcs, and text, all in different colors.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>